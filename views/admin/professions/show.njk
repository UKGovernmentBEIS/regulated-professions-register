{% extends "admin/base.njk" %}

{% from "govuk/components/button/macro.njk" import govukButton %}

{% set bodyClasses = "rpr-internal__page rpr-details__page" %}

{% block content %}
  {% include "../../_messages.njk" %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% include "../../professions/_profession-details.njk" %}
    </div>
    <div class="govuk-grid-column-one-third">
      <aside class="app-related-items rpr-internal__details-page-sidebar" role="complementary">
        <h2 class="govuk-heading-s" data-status>
          {{ "professions.admin.status.heading" | t }}<br>
          <span class="govuk-body">{{ ("professions.admin.status." + profession.status) | t }}</span>
        </h2>

        <h2 class="govuk-heading-s" data-cy="last-modified-text">
          {{ "professions.admin.changed.on" | t }}<br>
          <span class="govuk-body" data-cy="last-modified">{{ presenter.lastModified }}</span>
        </h2>

        <h2 class="govuk-heading-s" data-cy="changed-by-text">
          {{ "professions.admin.changed.by" | t }}<br>
          <span class="govuk-body" data-cy="changed-by-user">{{ presenter.changedBy }}</span>
        </h2>

        <ul class="govuk-list">
          {% if profession.status === 'draft' and 'publishProfession' in permissions %}
            <li>
                <form action="/admin/professions/{{ profession.id }}/versions/{{ profession.versionId }}/publish?_method=PUT" method="post">
                  {{ govukButton({
                    text: ('professions.form.button.publishNow' | t),
                    classes: "govuk-button",
                    id: "publish-button"
                  }) }}
                </form>
            </li>
          {% endif %}
          {% if 'editProfession' in permissions %}
          <li>
              {{ govukButton({
                text: (('professions.admin.button.edit.' + profession.status) | t),
                classes: "govuk-button--secondary",
                id: "edit-button",
                href: "/admin/professions/" + profession.id + "/versions/edit"
              }) }}
          </li>
          {% endif %}
        </ul>
      </aside>
    </div>
  </div>

{% endblock %}
