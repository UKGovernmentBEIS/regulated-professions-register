{% extends "admin/base.njk" %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set bodyClasses = "rpr-internal__page" %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <span class="govuk-caption-l">{{ captionText | t }}</span>
      {% if edit %}
        <h1 class="govuk-heading-l">{{ ("professions.form.headings.originalAnswers" | t) }}</h1>
      {% else %}
        <h1 class="govuk-heading-l">{{ ("professions.form.headings.checkAnswers" | t) }}</h1>
      {% endif %}

      <form method="post" action="confirmation">
        <h2 class="govuk-heading-m">{{ ("professions.form.headings.topLevelInformation" | t) }}</h2>

        {% set selectedNationsSummaryListHtml %}
          <ul>
            {% for nation in nations %}
              <li class='govuk-body-m'>{{ nation }}</li>
            {% endfor %}
          </ul>
        {% endset %}

        {% set selectedIndustriesSummaryListHtml %}
          <ul>
            {% for industry in industries %}
              <li class='govuk-body-m'>{{ industry }}</li>
            {% endfor %}
          </ul>
        {% endset %}
        {{
          govukSummaryList({
            rows: [
              {
                key: {
                  text: ("professions.form.label.topLevelInformation.name" | t)
                },
                value: {
                  text: name
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/top-level-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.topLevelInformation.name" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.topLevelInformation.nations" | t)
                },
                value: {
                  html: selectedNationsSummaryListHtml
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/top-level-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.topLevelInformation.nation" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.topLevelInformation.industry" | t)
                },
                value: {
                  html: selectedIndustriesSummaryListHtml
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/top-level-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.topLevelInformation.industry" | t)
                    }
                  ]
                }
              }
            ]
          })
        }}

        <h2 class="govuk-heading-m">{{ ("professions.form.headings.regulatoryBody" | t) }}</h2>

        {{
          govukSummaryList({
            rows: [
              {
                key: {
                  text: ("professions.form.label.regulatoryBody.regulatedAuthority" | t)
                },
                value: {
                  text: organisation
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/regulatory-body/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.regulatoryBody.regulatedAuthority" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.regulatoryBody.additionalAuthority" | t)
                },
                value: {
                  text: (additionalOrganisation if (additionalOrganisation|length) else ("app.no" | t))
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/regulatory-body/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.regulatoryBody.additionalAuthority" | t)
                    }
                  ]
                }
              }
            ]
          })
        }}

        <h2 class="govuk-heading-m">{{ ("professions.form.headings.registration" | t) }}</h2>

        {{
          govukSummaryList({
            rows: [
              {
                key: {
                  text: ("professions.form.label.registration.mandatoryRegistration" | t)
                },
                value: {
                  text: ("professions.mandatoryRegistration." + mandatoryRegistration) | t
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/registration/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.registration.mandatoryRegistration" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.registration.registrationRequirements" | t)
                },
                value: {
                  text: registrationRequirements
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/registration/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.registration.registrationRequirements" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.registration.registrationUrl" | t)
                },
                value: {
                  html: ("<a class=\"govuk-link\" href=\"" + (registrationUrl | escape) + "\">" + (registrationUrl | escape) + "</a>") if registrationUrl else ""
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/registration/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.registration.registrationUrl" | t)
                    }
                  ]
                }
              }
            ]
          })
        }}

        <h2 class="govuk-heading-m">{{ ("professions.form.headings.regulatedActivities" | t) }}</h2>

        {{
          govukSummaryList({
            rows: [
              {
                key: {
                  text: ("professions.form.label.regulatedActivities.regulationSummary" | t)
                },
                value: {
                  html: regulationSummary | multiline
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/regulated-activities/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.regulatedActivities.regulationSummary" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.regulatedActivities.reservedActivities" | t)
                },
                value: {
                  html: reservedActivities | multiline
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/regulated-activities/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.regulatedActivities.reservedActivities" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.regulatedActivities.protectedTitles" | t)
                },
                value: {
                  html: protectedTitles | multiline
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/regulated-activities/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.regulatedActivities.protectedTitles" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.regulatedActivities.regulationUrl" | t)
                },
                value: {
                  html: ("<a class=\"govuk-link\" href=\"" + (regulationUrl | escape) + "\">" + (regulationUrl | escape) + "</a>") if regulationUrl else ""
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/regulated-activities/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.regulatedActivities.regulationUrl" | t)
                    }
                  ]
                }
              }
            ]
          })
        }}

        {% if qualification %}
        <h2 class="govuk-heading-m">{{ ("professions.form.headings.qualificationInformation" | t) }}</h2>

        {{
          govukSummaryList({
            rows: [
              {
                key: {
                  text: ("professions.form.label.qualificationInformation.methodsToObtainQualification" | t)
                },
                value: {
                  html: (qualification.methodToObtainQualification | t)
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.methodsToObtainQualification" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.qualificationInformation.mostCommonPathToObtainQualification" | t)
                },
                value: {
                  html: (qualification.mostCommonPathToObtainQualification | t)
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.mostCommonPathToObtainQualification" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.qualificationInformation.duration" | t)
                },
                value: {
                  text: qualification.duration
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.mostCommonPathToObtainQualification" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.qualificationInformation.mandatoryProfessionalExperience" | t)
                },
                value: {
                  text: qualification.mandatoryProfessionalExperience | t
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.mandatoryProfessionalExperience" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.qualificationInformation.qualificationLevel" | t)
                },
                value: {
                  html: qualification.level | multiline
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.qualificationLevel" | t)
                    }
                  ]
                }
              },
              {
                classes: ("govuk-visually-hidden" if isUK else ""),
                key: {
                  text: ("professions.form.label.qualificationInformation.ukRecognition" | t)
                },
                value: {
                  text: qualification.ukRecognition
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.ukRecognition" | t)
                    }
                  ]
                }
              },
              {
                classes: ("govuk-visually-hidden" if isUK else ""),
                key: {
                  text: ("professions.form.label.qualificationInformation.ukRecognitionUrl" | t)
                },
                value: {
                   html: qualification.ukRecognitionUrl
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.ukRecognitionUrl" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.qualificationInformation.otherCountriesRecognition" | t)
                },
                value: {
                  text: qualification.otherCountriesRecognition
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.otherCountriesRecognition" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.qualificationInformation.otherCountriesRecognitionUrl" | t)
                },
                value: {
                  html: qualification.otherCountriesRecognitionUrl
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/qualification-information/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.qualificationInformation.otherCountriesRecognitionUrl" | t)
                    }
                  ]
                }
              }
            ]
          })
        }}
        {% endif %}

        <h2 class="govuk-heading-m">{{ ("professions.form.headings.legislation" | t) }}</h2>

        {{
          govukSummaryList({
            rows: [
              {
                key: {
                  text: ("professions.form.label.legislation.nationalLegislation" | t)
                },
                value: {
                  html: legislation.name | multiline
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/legislation/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.legislation.nationalLegislation" | t)
                    }
                  ]
                }
              },
              {
                key: {
                  text: ("professions.form.label.legislation.link" | t)
                },
                value: {
                  html: "<a class='govuk-link' href='" + (legislation.url | escape) + "'>" + (legislation.url | escape) + "</a>"
                },
                actions: {
                  items: [
                    {
                      href: "/admin/professions/" + professionId + "/versions/" + versionId + "/legislation/edit?change=true",
                      text: ("app.change" | t),
                      visuallyHiddenText: ("professions.form.label.legislation.nationalLegislation" | t)
                    }
                  ]
                }
              }
            ]
          })
        }}

        {% if edit %}
        {% elif confirmed %}
          {{
            govukButton({
              id: "submit-button",
              type: "Submit",
              preventDoubleClick: true,
              text: ("professions.form.button.publishNow" | t)
            })
          }}
        {% else %}
          {{
            govukButton({
              id: "submit-button",
              type: "Submit",
              preventDoubleClick: true,
              text: ("professions.form.button.create" | t)
            })
          }}
        {% endif %}
      </form>

    </div>

    <div class="govuk-grid-column-one-third"></div>
  </div>

{% endblock %}
