{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/button/macro.njk" import govukButton %}

<form action="" method="get" class="form">
  <div class="{{ filterRowClass }}">

    {% if professionsCheckboxItems %}
      <div class="{{ filterColumnClass }}">
        {{ govukCheckboxes({
          name: "professions[]",
          classes: filterCheckboxClasses,
          fieldset: {
            legend: {
            text: (filterTextPrefix + ".filter.professions.label") | t,
            classes: "govuk-fieldset__legend--s"
            }
          },
          hint: {
            text: (filterTextPrefix + ".filter.professions.hint") | t
          },
          items: professionsCheckboxItems
        }) }}
      </div>
    {% else %}
      <div class="{{ filterColumnClass }}">
        {{ govukInput({
        label: {
          text: (filterTextPrefix + ".filter.keywords.label") | t,
          classes: "govuk-label--s"
        },
        classes: filterKeywordsWidthClass,
        hint: {
          text: (filterTextPrefix + ".filter.keywords.hint") | t
        },
        id: "keywordsFilter",
        name: "keywords",
        value: filters.keywords
      }) }}
      </div>
    {% endif %}

    {% if industriesCheckboxItems %}
      <div class="{{ filterColumnClass }}">
        {{ govukCheckboxes({
          name: "industries[]",
          classes: filterCheckboxClasses,
          fieldset: {
            legend: {
            text: (filterTextPrefix + ".filter.industries.label") | t,
            classes: "govuk-fieldset__legend--s"
            }
          },
          hint: {
            text: (filterTextPrefix + ".filter.industries.hint") | t
          },
          items: industriesCheckboxItems
        }) }}
      </div>
    {% endif %}

    {% if nationsCheckboxItems %}
      <div class="{{ filterColumnClass }}">
        {{ govukCheckboxes({
          name: "nations[]",
          classes: filterCheckboxClasses,
          fieldset: {
            legend: {
            text: (filterTextPrefix + ".filter.nations.label") | t,
            classes: "govuk-fieldset__legend--s"
            }
          },
          hint: {
            text: (filterTextPrefix + ".filter.nations.hint") | t
          },
          items: nationsCheckboxItems
        }) }}
      </div>
    {% endif %}

    {% if organisationsCheckboxItems %}
      <div class="{{ filterColumnClass }}">
        {{ govukCheckboxes({
          name: "organisations[]",
          classes: filterCheckboxClasses,
          fieldset: {
            legend: {
            text: (filterTextPrefix + ".filter.organisations.label") | t,
            classes: "govuk-fieldset__legend--s"
            }
          },
          hint: {
            text: (filterTextPrefix + ".filter.organisations.hint") | t
          },
          items: organisationsCheckboxItems
        }) }}
      </div>
    {% endif %}

    {% if regulationTypesCheckboxItems %}
      <div class="{{ filterColumnClass }}">
        {{ govukCheckboxes({
          name: "regulationTypes[]",
          classes: filterCheckboxClasses,
          fieldset: {
            legend: {
            text: (filterTextPrefix + ".filter.regulationTypes.label") | t,
            classes: "govuk-fieldset__legend--s"
            }
          },
          hint: {
            text: (filterTextPrefix + ".filter.regulationTypes.hint") | t
          },
          items: regulationTypesCheckboxItems
        }) }}
      </div>
      {% if showRegulationTypesHint %}
        <p class="govuk-body-m">
          <a class="govuk-link" href="/regulation-types">{{ (filterTextPrefix + ".regulationTypesHint") | t }}</a>
        </p>
      {% endif %}
    {% endif %}

    {% if yearsCheckboxItems %}
      <div class="{{ filterColumnClass }}">
        {{ govukCheckboxes({
          name: "years[]",
          classes: filterCheckboxClasses,
          fieldset: {
            legend: {
            text: (filterTextPrefix + ".filter.years.label") | t,
            classes: "govuk-fieldset__legend--s"
            }
          },
          hint: {
            text: (filterTextPrefix + ".filter.years.hint") | t
          },
          items: yearsCheckboxItems
        }) }}
      </div>
    {% endif %}

    {% if statusesCheckboxItems %}
      <div class="{{ filterColumnClass }}">
        {{ govukCheckboxes({
          name: "statuses[]",
          classes: filterCheckboxClasses,
          fieldset: {
            legend: {
            text: (filterTextPrefix + ".filter.statuses.label") | t,
            classes: "govuk-fieldset__legend--s"
            }
          },
          hint: {
            text: (filterTextPrefix + ".filter.statuses.hint") | t
          },
          items: statusesCheckboxItems
        }) }}
      </div>
    {% endif %}

  </div>

  <div class="{{ filterRowClass }}">
    <div class="{{ filterButtonColumnClass }}">
      <p class="govuk-body-m">
        <a class="govuk-link" href="{{emptyFiltersHref}}">{{"app.filters.clearAllButton" | t}}</a>
      </p>
      {{ govukButton({
        text: "app.filters.filterButton" | t,
        classes: filterButtonClasses
      }) }}
    </div>
  </div>

  {% if sortMethod %}
    <input type="hidden" name="sortBy" value="{{ sortMethod }}" />
  {% endif %}
</form>
