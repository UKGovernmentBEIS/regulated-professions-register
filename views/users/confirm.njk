{% extends "base.njk" %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}

{% block content %}

<div class="govuk-width-container">

  <main class="govuk-main-wrapper">

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">

        {{ govukBackLink({
          text: ("app.back" | t),
          href: "personal-details/edit"
        }) }}

        {% if userAlreadyExists %}

        {{ govukErrorSummary({
          titleText: ("app.errors.heading" | t),
          errorList: [
            {
              text: ("users.form.errors.email.alreadyExists" | t)
            }
          ]
        }) }}

        {% endif %}

        <span class="govuk-caption-xl">{{ "users.form.headings.main" | t }}</span>
        <h1 class="govuk-heading-xl">{{ "users.form.headings.checkAnswers" | t }}</h1>

        <h2 class="govuk-heading-m">{{ "users.form.headings.personalDetails" | t }}</h2>

          {% set roleItems = "" %}
          {% for role in roles %}
            {% set translation = "users.form.label." + role %}
            {% set roleItems = roleItems + (translation | t) + "<br/>" %}
          {% endfor %}

        {{ govukSummaryList({
          rows: [
            {
              key: {
                text: ("users.form.label.name" | t)
              },
              value: {
                text: name
              },
              actions: {
                items: [
                  {
                    href: "personal-details/edit?change=true",
                    text: ("app.change" | t),
                    visuallyHiddenText: ("users.form.label.name" | t)
                  }
                ]
              }
            },
            {
              key: {
                text: ("users.form.label.email" | t)
              },
              value: {
                text: email
              },
              actions: {
                items: [
                  {
                    href: "personal-details/edit?change=true",
                    text: ("app.change" | t),
                    visuallyHiddenText: ("users.form.label.email" | t)
                  }
                ]
              }
            },
            {
              key: {
                text: ("users.form.label.roles" | t)
              },
              value: {
                text: (roleItems | safe)
              },
              actions: {
                items: [
                  {
                    href: "roles/edit?change=true",
                    text: ("app.change" | t),
                    visuallyHiddenText: ("users.form.label.roles" | t)
                  }
                ]
              }
            }
          ]
        }) }}

        <form method="post" action="confirm">
          {{ govukButton({
            text: ("users.form.button.create" | t),
            preventDoubleClick: true,
            type: "submit",
            id: "submit-button"
          }) }}
        </form>

      </div>

      <div class="govuk-grid-column-one-third">
      </div>
    </div>

  </main>
</div>



{% endblock %}
