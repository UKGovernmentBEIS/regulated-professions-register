{% extends "base.njk" %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/table/macro.njk" import govukTable %}

{% set bodyClasses = "rpr-internal__listing rpr-internal__page" %}

{% block content %}
  <h1 class="govuk-heading-xl">
    <span class="govuk-caption-l">{{ organisation }}</span>
    {{ "professions.admin.heading" | t }}
  </h1>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      {% if 'createProfession' in permissions %}
        <h2 class="govuk-heading-l">{{ "professions.admin.addHeading" | t }} </h2>

        <p class="govuk-body-m">{{ "professions.admin.addText" | t }}</p>
        <form action="/admin/professions" method="post" class="form">
          {{ govukButton({
            text: "professions.admin.addButtonLabel" | t
          }) }}
        </form>

        <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
      {% endif %}

      <h2 class="govuk-heading-l">{{ "professions.admin.manageHeading" | t }} </h2>

      {% if view === 'overview' %}
        {% set changedByCheckboxArgs = false %}
      {% else %}
        {% set organisationsCheckboxArgs = false %}
        {% set industriesCheckboxArgs = false %}
      {% endif %}
      {% set filterTextPrefix = "professions.admin" %}
      {% include "../../shared/_horizontal-filter.njk" %}
    </div>
  </div>

  <div class="govuk-grid-row">

    <div class="govuk-grid-column-full">

      {% set filterCriteriaTextPrefix = "professions.admin" %}
      {% if not (view === 'overview') %}
        {% set hideOrganisationTags = true %}
      {% endif %}
      {% include "../../shared/_filter-criteria.njk" %}

      <p class="govuk-body-m">
        <span class="govuk-!-font-size-36 govuk-!-font-weight-bold">{{ professions.length }}</span> {{ ("professions.admin.foundSingular" | t) if (professions.length === 1) else ("professions.admin.foundPlural" | t) }}
      </p>

      {{ govukTable({
        firstCellIsHeader: true,
        head: headings,
        rows: professions
      }) }}
    </div>

  </div>

{% endblock %}
