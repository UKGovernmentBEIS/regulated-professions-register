{% set bodyClasses = "rpr-internal__page rpr-details__page" %}
{% extends "admin/base.njk" %}

{% from "govuk/components/button/macro.njk" import govukButton %}

{% set title = profession.name %}

{% block content %}
  {% include "../../_messages.njk" %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% include "../../professions/_profession-details.njk" %}
    </div>
    <div class="govuk-grid-column-one-third">
      <aside class="app-related-items rpr-internal__details-page-sidebar" role="complementary">
        <h2 class="govuk-heading-s" data-status>
          {{ "professions.admin.status.heading" | t }}<br>
          <span class="govuk-body">{{ ("professions.admin.status." + profession.status) | t }}</span>
        </h2>

        <h2 class="govuk-heading-s" data-cy="last-modified-text">
          {{ "professions.admin.changed.on" | t }}<br>
          <span class="govuk-body" data-cy="last-modified">{{ presenter.lastModified }}</span>
        </h2>

        <h2 class="govuk-heading-s" data-cy="changed-by-text">
          {{ "professions.admin.changed.by" | t }}<br>
          <span class="govuk-body" data-cy="changed-by-user">{{ presenter.changedBy }}</span>
        </h2>

        {% if profession.status !== 'archived' %}
          <nav role="navigation" data-cy="actions">
            <ul class="govuk-list">
              {% if profession.status === 'draft' and 'publishProfession' in permissions %}
                <li>
                  {{
                    govukButton({
                      text: ('professions.form.button.publishNow' | t),
                      classes: "govuk-button",
                      attributes: { "data-cy": "publish-button" },
                      href: "/admin/professions/" + profession.id + "/versions/" + profession.versionId + "/publish"
                    })
                  }}
                </li>
              {% endif %}
              {% if 'editProfession' in permissions %}
              <li>
                  <form method="post" action="/admin/professions/{{ profession.id }}/versions">
                    {{
                      govukButton({
                        id: "submit-button",
                        type: "Submit",
                        classes: "govuk-button--secondary",
                        id: "edit-button",
                        text: (('professions.admin.button.edit.' + profession.status) | t)
                      })
                    }}
                  </form>
              </li>
              {% endif %}
              {% if 'deleteProfession' in permissions %}
              <li>
                  {{
                    govukButton({
                      text: ("professions.admin.button.archive" | t),
                      href: "/admin/professions/" + profession.id + "/versions/" + profession.versionId + "/archive",
                      classes: "govuk-button--warning"
                    })
                  }}
              </li>
              {% endif %}
            </ul>
          </nav>
        {% endif %}
      </aside>
    </div>
  </div>

{% endblock %}
