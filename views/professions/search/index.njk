{% extends "base.njk" %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}

{% block content %}
<h1 class="govuk-heading-xl">{{ "professions.search.heading" | t }}</h1>

  <div class="govuk-grid-row">

    <div class="govuk-grid-column-one-third">

      {% set filterTextPrefix = "professions.search" %}
      {% include "../../shared/_filter.njk" %}

    </div>

    <div class="govuk-grid-column-two-thirds">

      {% set filterCriteriaTextPrefix = "professions.search" %}
      {% include "../../shared/_filter-criteria.njk" %}

      <p class="govuk-body-m">
        <span class="govuk-!-font-size-36 govuk-!-font-weight-bold">{{ professions.length }}</span> {{ ("professions.search.foundSingular" | t) if (professions.length === 1) else ("professions.search.foundPlural" | t) }}
      </p>

      <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

      {% for profession in professions %}

        {% set industriesHtml %}
          {% for industry in profession.industries %}
            <p class="govuk-body-m">{{ industry }}</p>
          {% endfor %}
        {% endset %}

        <div>
          <h2>
            <a class="govuk-link govuk-heading-l rpr-listing__profession-title" href="/professions/{{ profession.slug }}">{{ profession.name }}<br>
              <span class="govuk-caption-l">{{ profession.nations }}</span></a>
          </h2>

            {{ govukSummaryList({
              classes: 'govuk-summary-list--no-border rpr-listing__profession-summary-list',
              rows: [
                {
                  key: {
                    text: ("professions.search.profession.regulators" | t)
                  },
                  value: {
                    html: "Placeholder regulators"
                  }
                },
                {
                  key: {
                    text: ("professions.search.profession.industry" | t)
                  },
                  value: {
                    html: industriesHtml | safe
                  }
                }
              ]
            }) }}

          {% if not loop.last %}
            <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
          {% endif %}

        </div>

      {% endfor %}

    </div>

  </div>

{% endblock %}}
